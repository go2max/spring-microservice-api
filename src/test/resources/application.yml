
spring:
  cloud:
    gateway:
      routes:
      # =====================================
      - host_example_to_httpbin=http://httpbin.org:80, Host=**.example.org

      # =====================================
      - id: host_foo_path_headers_to_httpbin
        uri: http://httpbin.org:80
        predicates:
        - Host=**.foo.org
        - Url=/headers
        - Method=GET
        - Header=X-Request-Id, \d+
        - Query=foo, ba.
        - Query=baz
        - Cookie=chocolate, ch.p
        filters:
        - AddResponseHeader=X-Response-Foo, Bar

      # =====================================
      - id: add_request_header_test
        uri: http://httpbin.org:80
        predicates:
        - Host=**.addrequestheader.org
        - Url=/headers
        filters:
        - AddRequestHeader=X-Request-Foo, Bar

      # =====================================
      - id: add_response_header_test
        uri: http://httpbin.org:80
        predicates:
        - Host=**.addresponseheader.org
        - Url=/headers
        filters:
        - AddResponseHeader=X-Request-Foo, Bar

      # =====================================
      - id: remove_request_header_test
        uri: http://httpbin.org:80
        predicates:
        - Host=**.removerequestheader.org
        - Url=/headers
        filters:
        - RemoveRequestHeader=X-Request-Foo

      # =====================================
      - id: remove_response_header_test
        uri: http://httpbin.org:80
        predicates:
        - Host=**.removereresponseheader.org
        - Url=/headers
        filters:
        - AddResponseHeader=X-Request-Foo, Bar
        - RemoveResponseHeader=X-Request-Foo

      # =====================================
      - id: set_response_header_test
        uri: http://httpbin.org:80
        predicates:
        - Host=**.setreresponseheader.org
        - Url=/headers
        filters:
        - AddResponseHeader=X-Request-Foo, Bar1
        - AddResponseHeader=X-Request-Foo, Bar2
        - SetResponseHeader=X-Request-Foo, Bar

      # =====================================
      - id: rewrite_path_test
        uri: http://httpbin.org:80
        predicates:
        - Host=**.baz.org
        filters:
        # $\ is being used as an escape
        - RewritePath=/foo/(?<segment>.*), /$\{segment}
        - AddRequestHeader=X-Request-Foo, Bar
        - AddRequestHeader=X-Request-Baz, Bat

      # =====================================
      - id: default_path_to_httpbin
        uri: http://httpbin.org:80
        predicates:
        - name: Url
          value: /**
logging:
  level:
    org.springframework.cloud.gateway: TRACE

management:
  context-path: /admin
  port: 8081
